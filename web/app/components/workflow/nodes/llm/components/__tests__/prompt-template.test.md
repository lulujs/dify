# 提示词模板组件测试清单

## 手动测试清单

### 1. 基础功能测试

#### 1.1 模板选择器按钮
- [ ] 按钮正确显示在 Chat 模型的提示词列表顶部
- [ ] 按钮正确显示在 Completion 模型的编辑器工具栏
- [ ] 按钮图标（网格图标）正确显示
- [ ] 悬停时显示正确的样式效果
- [ ] 点击按钮能打开模态框

#### 1.2 模板模态框
- [ ] 模态框正确打开和关闭
- [ ] 标题和描述文本正确显示
- [ ] 所有 9 个预设模板都正确显示
- [ ] 每个模板的图标、名称、描述都正确显示
- [ ] 模板卡片布局正确（2列网格）
- [ ] 关闭按钮功能正常

#### 1.3 模板选择
- [ ] 点击模板卡片能选中该模板
- [ ] 选中的模板显示蓝色边框
- [ ] 选中的模板显示勾选图标
- [ ] 只能选中一个模板（单选）
- [ ] 切换选择时前一个模板取消选中

#### 1.4 模板应用
- [ ] 未选择模板时"应用"按钮禁用
- [ ] 选择模板后"应用"按钮启用
- [ ] 点击"应用"显示确认对话框
- [ ] 确认对话框显示正确的警告信息
- [ ] 点击"取消"关闭确认对话框，不应用模板
- [ ] 点击"确认"应用模板并关闭所有对话框

### 2. 模型适配测试

#### 2.1 Chat 模型
- [ ] 应用模板后生成正确的消息数组格式
- [ ] System 角色的消息正确生成
- [ ] 模板内容正确填充到编辑器
- [ ] 多条消息的模板正确处理

#### 2.2 Completion 模型
- [ ] 应用模板后生成纯文本格式
- [ ] 模板内容正确填充到编辑器
- [ ] 文本格式保持正确

### 3. 国际化测试

#### 3.1 英文界面
- [ ] 模态框标题显示 "Prompt Templates"
- [ ] 描述文本正确显示英文
- [ ] 所有模板名称显示英文
- [ ] 所有模板描述显示英文
- [ ] 确认对话框显示英文

#### 3.2 中文界面
- [ ] 模态框标题显示 "提示词模板"
- [ ] 描述文本正确显示中文
- [ ] 所有模板名称显示中文
- [ ] 所有模板描述显示中文
- [ ] 确认对话框显示中文

### 4. 交互测试

#### 4.1 键盘操作
- [ ] ESC 键关闭模态框
- [ ] Tab 键正确切换焦点
- [ ] Enter 键在选中模板时应用

#### 4.2 鼠标操作
- [ ] 悬停在模板卡片上显示悬停效果
- [ ] 点击模板卡片选中
- [ ] 点击模态框外部关闭模态框
- [ ] 拖动滚动条浏览所有模板

### 5. 边界情况测试

#### 5.1 数据覆盖
- [ ] 应用模板确实覆盖了现有配置
- [ ] 覆盖后无法撤销（除非手动恢复）
- [ ] 确认对话框正确警告用户

#### 5.2 空状态
- [ ] 首次打开节点时可以应用模板
- [ ] 已有配置时可以应用模板
- [ ] 应用后立即可以再次应用其他模板

#### 5.3 错误处理
- [ ] 模板数据缺失时的处理
- [ ] 翻译缺失时的降级处理
- [ ] 网络错误时的处理（如果有）

### 6. 性能测试

#### 6.1 渲染性能
- [ ] 模态框打开速度快（< 100ms）
- [ ] 模板列表渲染流畅
- [ ] 选择模板响应及时
- [ ] 应用模板后编辑器更新及时

#### 6.2 内存使用
- [ ] 多次打开关闭模态框无内存泄漏
- [ ] 组件卸载后正确清理

### 7. 样式测试

#### 7.1 响应式设计
- [ ] 在不同屏幕尺寸下正确显示
- [ ] 模态框宽度适配
- [ ] 模板卡片布局适配

#### 7.2 主题适配
- [ ] 亮色主题下样式正确
- [ ] 暗色主题下样式正确（如果支持）
- [ ] 颜色对比度符合可访问性标准

#### 7.3 动画效果
- [ ] 模态框打开/关闭动画流畅
- [ ] 悬停效果过渡自然
- [ ] 选中状态切换动画流畅

### 8. 集成测试

#### 8.1 与 LLM 节点集成
- [ ] 在工作流编辑器中正确显示
- [ ] 与其他 LLM 节点功能不冲突
- [ ] 与提示词生成器功能不冲突

#### 8.2 与其他组件集成
- [ ] 与变量选择器配合正常
- [ ] 与上下文配置配合正常
- [ ] 与模型选择配合正常

### 9. 用户体验测试

#### 9.1 易用性
- [ ] 按钮位置合理，易于发现
- [ ] 模板分类清晰，易于选择
- [ ] 操作流程简单，无需学习
- [ ] 错误提示清晰，易于理解

#### 9.2 视觉反馈
- [ ] 所有交互都有视觉反馈
- [ ] 加载状态正确显示（如果有）
- [ ] 成功/失败状态正确显示

## 自动化测试建议

### 单元测试
```typescript
describe('PromptTemplateSelector', () => {
  it('should render button correctly', () => {})
  it('should open modal on click', () => {})
  it('should call onApplyTemplate with correct data', () => {})
})

describe('PromptTemplateModal', () => {
  it('should render all templates', () => {})
  it('should select template on click', () => {})
  it('should show confirmation dialog', () => {})
  it('should apply template on confirm', () => {})
  it('should close modal on cancel', () => {})
})
```

### 集成测试
```typescript
describe('Prompt Template Integration', () => {
  it('should integrate with Chat model correctly', () => {})
  it('should integrate with Completion model correctly', () => {})
  it('should replace existing prompt', () => {})
  it('should work with i18n', () => {})
})
```

### E2E 测试
```typescript
describe('Prompt Template E2E', () => {
  it('should complete full workflow', () => {
    // 1. 打开工作流编辑器
    // 2. 添加 LLM 节点
    // 3. 点击模板按钮
    // 4. 选择模板
    // 5. 确认应用
    // 6. 验证提示词已更新
  })
})
```

## 测试环境

- [ ] Chrome 浏览器
- [ ] Firefox 浏览器
- [ ] Safari 浏览器
- [ ] Edge 浏览器
- [ ] 移动端浏览器（如果支持）

## 测试数据

### 测试模板
使用所有 9 个预设模板进行测试：
1. Python Debugger
2. Translation
3. Meeting Takeaways
4. Writing Polisher
5. Professional Analyst
6. Excel Formula Expert
7. Travel Planning
8. SQL Sorcerer
9. Git Gud

### 测试场景
1. 空白节点应用模板
2. 已有简单提示词的节点应用模板
3. 已有复杂提示词的节点应用模板
4. 连续应用多个不同模板

## 已知问题

记录测试过程中发现的问题：

1. [ ] 问题描述
   - 重现步骤：
   - 预期行为：
   - 实际行为：
   - 优先级：

## 测试结论

- 测试日期：
- 测试人员：
- 通过率：
- 主要问题：
- 建议改进：
